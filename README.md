# :art:MOVIE-REVIEW v2.0.0

--------------------------------------
### 주요 기능
- 영화 검색
- 인기 검색 순위
- 리뷰 작성

---------------------
## :white_check_mark:버전업 기능들
--------------------------
#### 영화검색
- 검색된 키워드, 카테고리 저장(캐싱 write back)
인기 검색어 순위를 만들기 위해서 검색된 키워드, 카테고리를 저장할 필요가 있는데
검색 시마다 db쪽에 저장하게 되면 너무많이, 자주 쿼리가 날아가는 문제가 발생했습니다.
이를 해결하기 위해서 일정 시간동안 검색된 키워드와 카테고리를 캐시에 저장한 후
지정된 시간이 되면 캐싱에 저장된 값을 한꺼번에 db에 저장하도록 구현 했습니다(write back).


#### 인기 검색 순위
- 인기 키워드(카테고리) 순위 (캐싱 read through)
인기 키워드 순위 같은경우 사용자에게 자주 노출이 되는 정보이기 때문에 불러오는 쿼리를 최소화 하고자,
인기 키워드가 유지되는 시간동안 캐시에 저장된 데이터를 반환하고, 순위가 바뀌는 시간에 캐싱 데이터를 업데이트
하는 로직을 구현했습니다.


- 인기 검색 대상일 경우 캐싱 (캐싱 look aside)
마찬가지로 인기 검색어로 검색된 결과도 사용자에게 자주 노출이 될것으로 생각해 이를 최적화 하기 위해서
사용자가 검색 요청한 키워드(카테고리)가 인기 검색 순위에 있을 경우에
그 정보를 우선 캐시에서 찾고, 없다면 db에서 조회하면서 결과를 캐시에 저장해주는 로직을 구현했습니다




------------------------------------------

### :memo:이유
1. 인기 검색 순위를 만들기 위해 키워드, 카테고리 관리
- 왜 count 필드를 추가하지 않고 각각의 row로 관리하는지?
-> count 같은 경우 검색어를 일정 로직에 따라(오타, 대소문자 구분) 묶어 줄 수 없다면 각각의 로우를 주고 통계를 내는 편이 맞다고 생각했습니다.
  또한 인기 검색 결과에 사용되는 값들은 일정 시간 이후의 결과만 통계에 반영이 되어야 하기 때문에, count 필드로 관리할 경우 일정 시간이 지난 만큼 count 필드의 값이 - 가 되어야 하는
  문제가 생깁니다. 이를 별도의 로직 없이 편리하게 구현 하려면 각각의 row 에 searchedAt 필드를 두고 where 절로 간편하게 구분 할 수 있기때문에 각각의 row로 관리했습니다.









